<!-- message -->
<p-toast></p-toast>
<!-- visible content -->
<div class="product-container">
    <h1 class="font-medium">Users</h1>
    <!-- table -->
    <div class="mt-4 shadow-2">
        <p-table
            [value]="users"
            [rowHover]="true"
            responsiveLayout="scroll"
            [paginator]="true"
            [rows]="10"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th
                        style="background-color: #f8f9fa"
                        pSortableColumn="name"
                    >
                        Name <p-sortIcon field="name"></p-sortIcon>
                    </th>
                    <th
                        style="background-color: #f8f9fa"
                        pSortableColumn="email"
                    >
                        Email <p-sortIcon field="email"></p-sortIcon>
                    </th>
                    <th
                        style="background-color: #f8f9fa"
                        pSortableColumn="isAdmin"
                    >
                    Permissions <p-sortIcon field="isAdmin"></p-sortIcon>
                    </th>
                    <th
                        style="background-color: #f8f9fa"
                        pSortableColumn="createdAt"
                    >
                        Date <p-sortIcon field="createdAt"></p-sortIcon>
                    </th>
                    <th style="background-color: #f8f9fa">Action</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-user>
                <tr>
                    <td>
                        {{ user.name }}
                    </td>
                    <td>{{ user.email }}</td>
                    <td>
                        <img
                            [src]="
                                user.isAdmin
                                    ? '../../../assets/images/admin.png'
                                    : '../../../assets/images/user.png'
                            "
                            width="45px"
                        />
                    </td>
                    <td>{{ user.createdAt | date: 'd/MM/YY, hh:mm a' }}</td>
                    <td>
                        <div (click)="getUserdata(user._id, user.isAdmin)">
                            <button
                                type="button"
                                pButton
                                label=". . . "
                                class="p-button-outlined p-button-secondary"
                                style="font-size: 0.7rem; padding: 10px 20px"
                                (click)="menu.toggle($event)"
                            ></button>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>
<p-menu #menu [popup]="true" [model]="items"></p-menu>

<p-confirmDialog
    header="Confirmation"
    icon="pi pi-exclamation-triangle"
></p-confirmDialog>
